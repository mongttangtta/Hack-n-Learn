{% extends "base.html" %}
{% block content %}
<div class="home-grid">

  <!-- ğŸ“Œ ê²Œì‹œíŒ ì˜ì—­ (ì™¼ìª½ ê·¸ëŒ€ë¡œ) -->
  <section class="boards">
    <div class="board card">
      <h3>ğŸ“¢ ê³µì§€ì‚¬í•­</h3>
      <ul class="posts">
        {% for p in notices %}
        <li><a href="{{ url_for('post', post_id=p['id']) }}"><strong>{{ p['title'] }}</strong></a> â€” {{ p['author'] }}</li>
        {% endfor %}
      </ul>
      <p class="more"><a href="{{ url_for('board', board='notice') }}">ë”ë³´ê¸° â†’</a></p>
    </div>

    <div class="board card">
      <h3>ğŸ’¬ ììœ ê²Œì‹œíŒ</h3>
      <ul class="posts">
        {% for p in frees %}
        <li><a href="{{ url_for('post', post_id=p['id']) }}"><strong>{{ p['title'] }}</strong></a> â€” {{ p['author'] }}</li>
        {% endfor %}
      </ul>
      <p class="more"><a href="{{ url_for('board', board='free') }}">ë”ë³´ê¸° â†’</a></p>
    </div>

    <div class="board card actions">
      <h3>ğŸ’³ ë¹ ë¥¸ ì´ë™</h3>
      <div class="btn-row">
        <a href="{{ url_for('account') }}">ë‚´ ê³„ì¢Œ</a>
        <a href="{{ url_for('transfer') }}">ì†¡ê¸ˆí•˜ê¸°</a>
      </div>
    </div>
  </section>

  <!-- âœ… ë¡œê·¸ì¸/í”„ë¡œí•„ ì˜ì—­ (ì˜¤ë¥¸ìª½) -->
  <aside class="sidebar card" style="text-align:center; padding:24px;">

    {% if session.username %}
      <div style="display:flex; align-items:center; gap:16px; justify-content:center; margin-bottom:16px;">
        {% if user_profile_image(session.username) %}
          <img src="{{ url_for('static', filename='profile/' ~ user_profile_image(session.username)) }}"
              style="width:90px; height:90px; border-radius:50%; object-fit:cover; border:2px solid #ddd;">
        {% else %}
          <img src="{{ url_for('static', filename='default_profile.png') }}"
              style="width:80px; height:80px; border-radius:50%; object-fit:cover; border:2px solid #ddd;">
        {% endif %}

        <div style="text-align:left;">
          <h2 style="margin:0 0 4px 0;">í™˜ì˜í•©ë‹ˆë‹¤ ğŸ‰</h2>
          <p style="margin:0; font-size:15px;"><b>{{ session.username }}</b>ë‹˜ ë¡œê·¸ì¸ ì¤‘ì…ë‹ˆë‹¤.</p>
        </div>
      </div>

      <div style="display:flex; gap:12px; margin-top:12px;">
        <a href="{{ url_for('profile') }}" 
          style="flex:1; padding:12px; background:#1d4ed8; color:white; border-radius:8px; font-weight:600;">
          í”„ë¡œí•„ ìˆ˜ì •
        </a>
        <a href="{{ url_for('logout') }}"
          style="flex:1; padding:12px; background:#dc2626; color:white; border-radius:8px; font-weight:600;">
          ë¡œê·¸ì•„ì›ƒ
        </a>
      </div>

    {% else %}
      <!-- ë¡œê·¸ì¸ í¼ (ë¹„ë¡œê·¸ì¸ ì‹œ ê·¸ëŒ€ë¡œ ìœ ì§€) -->
      <h3>ë¡œê·¸ì¸</h3>
      <form method="post" action="{{ url_for('login') }}" class="login-form">
        <label>ì•„ì´ë””</label>
        <input name="username" placeholder="username" required>
        <label>ë¹„ë°€ë²ˆí˜¸</label>
        <input name="password" type="password" required>
        <button type="submit">ë¡œê·¸ì¸</button>
      </form>
    {% endif %}
  </aside>

</div>
{% endblock %}

